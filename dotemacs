;; By default we starting in text mode.
(setq initial-major-mode
      (lambda ()
        (text-mode)
        )
      )

(setq inhibit-startup-message t)

(setq transient-mark-mode t)

(setq backup-directory-alist '(("." . "~/.emacs.d/backups")))


(require 'package)
(add-to-list 'package-archives '("marmalade" . "http://marmalade-repo.org/packages/") t)
(add-to-list 'package-archives '("melpa" . "http://melpa.milkbox.net/packages/") t)
(add-to-list 'load-path (expand-file-name "~/.emacs.d/plugins"))
(package-initialize)

(load-theme 'wombat t)

;; kill alot of annoying things
(blink-cursor-mode t)
(menu-bar-mode 1)
(column-number-mode 1)
(if window-system
   (tool-bar-mode 0)
)
(menu-bar-mode 0)

(global-linum-mode)
;; Offset the number by two spaces to work around some weird fringe glitch
(setq linum-format "  %d ")

;; change scroll behavior to "progressive" instead of "jerky"
(setq-default scroll-up-aggressively 0.0 scroll-down-aggressively 0.0)
(setq scroll-step 1 scroll-conservatively 100000)

(require 'expand-region)
(global-set-key (kbd "C-=") 'er/expand-region)

;; enable numbered(if window-system backups & move them all ~/.emacsbackup
(setq version-control t)
(setq backup-directory-alist (list (cons ".*" (expand-file-name "~/.emacsbackup/"))))

(global-set-key "\C-xf" 'fill-paragraph)

(require 'ido)
(ido-mode)

(global-set-key
 "\M-x"
 (lambda ()
   (interactive)
   (call-interactively
    (intern
     (ido-completing-read
      "M-x "
      (all-completions "" obarray 'commandp))))))


(when (load "flymake" t)
  (defun flymake-pyflakes-init ()
    (let* ((temp-file (flymake-init-create-temp-buffer-copy
		       'flymake-create-temp-inplace))
	   (local-file (file-relative-name
			temp-file
			(file-name-directory buffer-file-name))))
      (list "pyflakes" (list local-file))))

  (add-to-list 'flymake-allowed-file-name-masks
	       '("\\.py\\'" flymake-pyflakes-init)))

(add-hook 'find-file-hook 'flymake-find-file-hook)
(delete '("\\.html?\\'" flymake-xml-init) 
	flymake-allowed-file-name-masks)
(delete '("\\.java\\'" flymake-simple-make-java-init flymake-simple-java-cleanup) 
	flymake-allowed-file-name-masks)

(load-library "flymake-cursor")

(autoload 'markdown-mode "markdown-mode.el"
   "Major mode for editing Markdown files" t)
(setq auto-mode-alist
   (cons '("\\.md" . markdown-mode) auto-mode-alist))

(setq frame-title-format
      (list (format "%s %%S: %%j " (system-name))
        '(buffer-file-name "%f" (dired-directory dired-directory "%b"))))

;; Set to the location of your Org files on your local system
(setq org-directory "~/Dropbox/OrgStaging")
;; Set to the name of the file where new notes will be stored
(setq org-mobile-inbox-for-pull "~/Dropbox/OrgStaging/flagged.org")
;; Set to <your Dropbox root directory>/MobileOrg.
(setq org-mobile-directory "~/Dropbox/MobileOrg")

;;(require 'magit)

(global-set-key "\C-x\C-m" 'execute-extended-command)
(global-set-key "\C-c\C-m" 'execute-extended-command)

(add-to-list 'load-path "/opt/local/share/emacs/site-lisp/slime")
(setq slime-lisp-implementations
     `((sbcl ("/opt/local/bin/sbcl"))
       (abcl ("/opt/local/bin/abcl"))
       (clisp ("/opt/local/bin/clisp"))))

(require 'slime)
(slime-setup  '(slime-repl slime-asdf slime-fancy slime-banner))

(setq inferior-lisp-program "sbcl")
(load (expand-file-name "~/quicklisp/slime-helper.el"))
(custom-set-variables
 ;; custom-set-variables was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 '(ansi-color-names-vector ["#3f3f3f" "#cc9393" "#7f9f7f" "#f0dfaf" "#8cd0d3" "#dc8cc3" "#93e0e3" "#dcdccc"])
 '(custom-safe-themes (quote ("71b172ea4aad108801421cc5251edb6c792f3adbaecfa1c52e94e3d99634dee7" default)))
 '(fci-rule-color "#383838"))
(custom-set-faces
 ;; custom-set-faces was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 )
